<templateSet group="ZSGG MIRI">
  <template name="z i designer" value="&#10;select *&#10;from DESIGNER;&#10;&#10;select *&#10;from TBLUSER where EMAIL = 'sunny8892.k@gmail.com';&#10;&#10;INSERT INTO DESIGNER (REF_USER_ID, ROLE, NICK_NAME, ACTIVE) VALUES ('190805194447a1440dbb0d4463a12c', 'FREELANCE', '김진선님', 'Y');" description="" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="SQL" value="true" />
    </context>
  </template>
  <template name="z 정상 뉴" value="-- ======================================&#10;-- ========           =======&#10;-- ======================================&#10;SELECT o.idx          order_idx,&#10;       c.commodity_idx,&#10;       od.NAME        receiver,&#10;       order_date,&#10;       o.status       order_status,&#10;       c.code1,&#10;       c.code2,&#10;       c.code3,&#10;       c.memo3        commodity_name,&#10;       c.quantity,&#10;       c.dprice,&#10;       c.make_site,&#10;       c.make_step    commodity_status,&#10;       co.co_seq      commodity_option_idx,&#10;       co.co_poi_name poi_name,&#10;       co.co_pov_name pov_name,&#10;       co.co_value1   pov_value1,&#10;       co.co_value2   pov_value2,&#10;       P.packing_date&#10;FROM (SELECT C.ORDER_IDX, C.IDX AS COMM_IDX&#10;      FROM ORDER_STEP_TIME T,&#10;           COMMODITY C&#10;      WHERE T.ORDER_IDX = C.ORDER_IDX&#10;        AND ORDER_STEP_ID IN (3, 95)&#10;        AND TO_CHAR(STEP_DATE, 'YYYY/MM/DD') BETWEEN '2019/07/01' and '2019/07/31'&#10;        AND 0 = (SELECT COUNT(*) FROM COMMODITY CMDT WHERE CMDT.ORDER_IDX = T.ORDER_IDX AND CMDT.MAKE_SITE NOT IN ('JMM.PRINT'))&#10;      UNION&#10;      SELECT ORDER_IDX, COMM_IDX&#10;      FROM COMMODITY_MAKE_STEP_HISTORY&#10;      WHERE TO_CHAR(MAKE_STEP_DATE, 'YYYY/MM/DD') BETWEEN '2019/07/01' and '2019/07/31'&#10;        AND MAKE_STEP_CODE IN (20300, 90100)&#10;        AND 0 &lt; (SELECT COUNT(*)&#10;                 FROM COMMODITY CMDT&#10;                 WHERE CMDT.ORDER_IDX = COMMODITY_MAKE_STEP_HISTORY.ORDER_IDX&#10;                   AND CMDT.MAKE_SITE NOT IN ('JMM.PRINT'))) STEP&#10;         JOIN (SELECT IDX, STATUS, TO_CHAR(oder_date, 'YYYY-MM-DD') order_date FROM TBLORDER WHERE INSITE IN ('BIZHOWS', 'BIZHOWS.M')) o&#10;              ON STEP.order_idx = O.idx&#10;         JOIN (SELECT IDX AS COMMODITY_IDX,&#10;                      CODE1,&#10;                      CODE2,&#10;                      CODE3,&#10;                      MEMO3,&#10;                      QUANTITY,&#10;                      DPRICE,&#10;                      MAKE_SITE,&#10;                      MAKE_STEP,&#10;                      STATUS&#10;               FROM COMMODITY&#10;               WHERE make_site = 'JMM.PRINT') C ON C.COMMODITY_IDX = STEP.COMM_IDX&#10;         JOIN (SELECT ORDER_IDX, NAME FROM order_delivery) od ON od.order_idx = o.idx&#10;         JOIN commodity_option co ON co.co_cmdt_idx = c.COMMODITY_IDX&#10;         JOIN (SELECT COMM_IDX, TO_CHAR(MAX(MAKE_STEP_DATE), 'YYYY-MM-DD') packing_date&#10;               FROM COMMODITY_MAKE_STEP_HISTORY&#10;               WHERE MAKE_STEP_CODE IN (20300, 90100)&#10;               group by COMM_IDX) P ON P.COMM_IDX = STEP.COMM_IDX&#10;-- [3, 95, 2019/07/01, 2019/08/31, JMM.PRINT, 2019/07/01, 2019/08/31, 20300, 90100, JMM.PRINT, BIZHOWS, BIZHOWS.M, JMM.PRINT, 20300, 90100]&#10;-- ======================================&#10;-- ======================================&#10;-- ======================================&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;" description="" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="SQL" value="true" />
    </context>
  </template>
  <template name="z etc 사용자쿼리-헬프디자인" value="SELECT *&#10;FROM (SELECT HELP_DESIGN.IDX                                                     주문_번호,&#10;             HELP_DESIGN.OWNER                                                   고객_아이디,&#10;             HELP_DESIGN.USER_NAME                                               고객_이름,&#10;             HELP_DESIGN.EMAIL                                                   고객_이메일,&#10;             HELP_DESIGN.MOBILE_NO                                               고객_전화번호,&#10;             to_char(HELP_DESIGN.DATA_IN, 'YYYY-MM-DD')                          주문_날짜,&#10;             to_char(HELP_DESIGN.DATA_IN, 'hh24:mi:ss')                          주문_시간,&#10;             CASE WHEN HELP_DESIGN.AMOUNT &gt; 0 THEN HELP_DESIGN.AMOUNT ELSE 0 END 주문_지불금액,&#10;             CASE&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 0 THEN '지불 없음'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 1 THEN '적립금'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 2 THEN '계좌 이체'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 3 THEN '계좌 이체'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 4 THEN '무통장입금(가상계좌) 이체'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 5 THEN '신용카드'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 6 THEN '핸드폰'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 7 THEN '무통장입금(가상계좌) 이체'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 8 THEN 'ARS'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 9 THEN 'BC TOP POINT'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 11 THEN '에스크로 계좌이체'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 12 THEN '에스크로 신용카드'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 13 THEN '신용카드'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 14 THEN '핸드폰'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 98 THEN '무료 이벤트 상품(지불없음)'&#10;                 WHEN HELP_DESIGN.PAY_TYPE = 99 THEN '기타'&#10;                 ELSE '에러' || HELP_DESIGN.PAY_TYPE&#10;                 END                                                             결제_방법,&#10;             CASE&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 1 THEN '결제 대기'&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 2 THEN '결제 확인'&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 11 THEN '추가 결제 대기'&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 12 THEN '추가 결제 완료'&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 10 THEN '헬프디자인 완료'&#10;                 WHEN HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY = 9999 THEN '결제 취소'&#10;                 ELSE '에러' || HELP_DESIGN.REF_HELP_DESIGN_ORDER_STEP_KEY&#10;                 END                                                             주문_상태,&#10;             CASE&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 1 THEN '디자인작업 대기 중'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 2 THEN '디자인작업 진행 중'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 3 THEN '디자인 확인 대기'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 4 THEN '디자인 완료'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 5 THEN '요청사항 분석 중'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 99 THEN '디자인 수정 요청'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY = 9999 THEN '취소'&#10;                 WHEN HELP_DESIGN.REQUEST_STEP_KEY is null THEN ''&#10;                 ELSE '에러'&#10;                 END                                                             요청_상태,&#10;             DISPLAY_NAME                                                        요청_상품,&#10;             HELP_DESIGN.USER_DESIGNER_NAME                                      디자이너_이름,&#10;             ROWNUM                                                              RNUM&#10;      FROM (SELECT HELP_ORDER.*,&#10;                   ORDER_STEP_RECORD.*,&#10;                   ORDER_PAYMENT.*,&#10;                   HELP_REQUEST.*,&#10;                   TUSER.USER_NAME USER_NAME,&#10;                   USER_DESIGNER.*,&#10;                   comm_meta.DISPLAY_NAME&#10;            FROM BIZPRINT.HELP_DESIGN_ORDER HELP_ORDER&#10;                     inner JOIN (--{{가장 최신 주문스탭 하나만 가져옴}}&#10;                SELECT RANK() OVER (PARTITION BY REF_HELP_DESIGN_ORDER_IDX ORDER BY DATA_IN DESC) RANK,&#10;                       REF_HELP_DESIGN_ORDER_STEP_KEY,&#10;                       REF_HELP_DESIGN_ORDER_IDX&#10;                FROM BIZPRINT.HELP_DESIGN_ORDER_STEP_RECORD) ORDER_STEP_RECORD&#10;                                ON (ORDER_STEP_RECORD.REF_HELP_DESIGN_ORDER_IDX = HELP_ORDER.IDX AND ORDER_STEP_RECORD.RANK = 1 and REF_HELP_DESIGN_ORDER_STEP_KEY != 9999)&#10;                     LEFT JOIN (--{{결제방식}}&#10;                SELECT sum(AMOUNT) AMOUNT, ORDER_IDX, PAY_TYPE&#10;                FROM BIZPRINT.PAYMENT group by ORDER_IDX, PAY_TYPE) ORDER_PAYMENT&#10;                               ON (ORDER_IDX = HELP_ORDER.IDX)&#10;                     LEFT JOIN (--{{요청}}&#10;                SELECT HELP_DESIGN_REQ.IDX                       REQUEST_IDX,&#10;                       HELP_DESIGN_REQ.REF_HELP_DESIGN_ORDER_IDX REQUEST_REF_ORDER_IDX,&#10;                       HELP_DESIGN_REQ_COMM_META.REF_COMMODITY_KEY   COMMODITY_KEY,&#10;                       REQUEST_TAKER.DESIGNER_ID                 REQUEST_DESIGNER_ID,&#10;                       REQUEST_TAKER.IDX                         REQUEST_DESIGNER_RECORD_IDX,&#10;                       REQUEST_STEP.REF_HELP_DESIGN_REQ_STEP_KEY REQUEST_STEP_KEY&#10;                FROM BIZPRINT.HELP_DESIGN_REQ&#10;                    left join BIZPRINT.HELP_DESIGN_REQ_COMM_META on (HELP_DESIGN_REQ_COMM_META.REF_HELP_DESIGN_REQ_IDX = HELP_DESIGN_REQ.IDX)&#10;                         LEFT JOIN (--{{작업자 기록 *가장 최신 하나만 선택}}&#10;                    SELECT RANK() OVER (PARTITION BY REF_HELP_DESIGN_REQ_IDX ORDER BY DATA_IN DESC) RANK,&#10;                           REF_HELP_DESIGN_REQ_IDX,&#10;                           DESIGNER_ID,&#10;                           IDX&#10;                    FROM BIZPRINT.HELP_DESIGN_REQ_TAKER_RECORD) REQUEST_TAKER&#10;                                   ON (REQUEST_TAKER.REF_HELP_DESIGN_REQ_IDX = HELP_DESIGN_REQ.IDX AND&#10;                                       REQUEST_TAKER.RANK = 1)&#10;                         LEFT JOIN (--{{}} 요청단계 기록 *가장 최신 하나만 선택&#10;                    SELECT RANK() OVER (PARTITION BY REF_HELP_DESIGN_REQ_IDX ORDER BY DATA_IN DESC) RANK,&#10;                           REF_HELP_DESIGN_REQ_IDX,&#10;                           REF_HELP_DESIGN_REQ_STEP_KEY&#10;                    FROM BIZPRINT.HELP_DESIGN_REQ_STEP_RECORD) REQUEST_STEP&#10;                                   ON (REQUEST_STEP.REF_HELP_DESIGN_REQ_IDX = HELP_DESIGN_REQ.IDX AND&#10;                                       REQUEST_STEP.RANK = 1)&#10;                WHERE 1 = 1) HELP_REQUEST ON (REQUEST_REF_ORDER_IDX = HELP_ORDER.IDX)&#10;                     LEFT JOIN (--{{고객 정보}}&#10;                SELECT NAME USER_NAME, ID FROM BIZPRINT.TBLUSER) TUSER ON (TUSER.ID = HELP_ORDER.OWNER)&#10;                     LEFT JOIN (--{{디자이너 유저정보}}&#10;                SELECT NAME USER_DESIGNER_NAME, ID USER_DESIGNER_ID FROM BIZPRINT.TBLUSER) USER_DESIGNER&#10;                               ON (USER_DESIGNER.USER_DESIGNER_ID = REQUEST_DESIGNER_ID)&#10;                     LEFT JOIN (--{{고객이 요청한 상품메타정보}}&#10;                SELECT COMMODITY_KEY, DISPLAY_NAME FROM BIZPRINT.HELP_DESIGN_COMMODITY_META) COMM_META&#10;                               ON (COMM_META.COMMODITY_KEY = HELP_REQUEST.COMMODITY_KEY)&#10;            WHERE 1 = 1&#10;              AND HELP_ORDER.DATA_IN &gt;= TO_DATE('2019-12-01')&#10;              AND HELP_ORDER.DATA_IN &lt;= TO_DATE('2019-12-31')&#10;            ORDER BY HELP_ORDER.IDX DESC) HELP_DESIGN)&#10;;&#10;&#10;/*&#10;              AND HELP_ORDER.DATA_IN &gt;= TO_DATE(#START_DATE#)&#10;              AND HELP_ORDER.DATA_IN &lt;= TO_DATE(#END_DATE#)&#10;*/" description="" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="SQL" value="true" />
    </context>
  </template>
</templateSet>